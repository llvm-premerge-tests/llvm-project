; NOTE: Assertions have been autogenerated by utils/update_test_checks.py UTC_ARGS: --version 2
; RUN: opt -passes=constraint-elimination -S -debug %s 2>&1 | FileCheck %s

; REQUIRES: asserts

define i1 @test_and_ule(i4 %x, i4 %y, i4 %z) {
; CHECK-LABEL: define i1 @test_and_ule
; CHECK-SAME: (i4 [[X:%.*]], i4 [[Y:%.*]], i4 [[Z:%.*]]) {
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[C_1:%.*]] = icmp ule i4 [[X]], [[Y]]
; CHECK-NEXT:    [[C_2:%.*]] = icmp ule i4 [[Y]], [[Z]]
; CHECK-NEXT:    [[AND:%.*]] = and i1 [[C_1]], [[C_2]]
; CHECK-NEXT:    br i1 [[AND]], label [[BB1:%.*]], label [[EXIT:%.*]]
; CHECK:       bb1:
; CHECK-NEXT:    ret i1 true
; CHECK:       exit:
; CHECK-NEXT:    [[C_3:%.*]] = icmp ule i4 [[X]], [[Z]]
; CHECK-NEXT:    ret i1 [[C_3]]
;




entry:
  %c.1 = icmp ule i4 %x, %y
  %c.2 = icmp ule i4 %y, %z
  %and = and i1 %c.1, %c.2
  br i1 %and, label %bb1, label %exit

bb1:
  %t.1 = icmp ule i4 %x, %z
  ret i1 %t.1

exit:
  %c.3 = icmp ule i4 %x, %z
  ret i1 %c.3
}

define i1 @test_and_ugt(i4 %x, i4 %y, i4 %z) {
; CHECK-LABEL: define i1 @test_and_ugt
; CHECK-SAME: (i4 [[X:%.*]], i4 [[Y:%.*]], i4 [[Z:%.*]]) {
; CHECK-NEXT:  entry:
; CHECK-NEXT:    [[C_1:%.*]] = icmp ugt i4 [[X]], [[Y]]
; CHECK-NEXT:    [[C_2:%.*]] = icmp ugt i4 [[Y]], [[Z]]
; CHECK-NEXT:    [[AND:%.*]] = and i1 [[C_1]], [[C_2]]
; CHECK-NEXT:    br i1 [[AND]], label [[BB1:%.*]], label [[EXIT:%.*]]
; CHECK:       bb1:
; CHECK-NEXT:    ret i1 false
; CHECK:       exit:
; CHECK-NEXT:    [[C_3:%.*]] = icmp ule i4 [[X]], [[Z]]
; CHECK-NEXT:    ret i1 [[C_3]]
;




entry:
  %c.1 = icmp ugt i4 %x, %y
  %c.2 = icmp ugt i4 %y, %z
  %and = and i1 %c.1, %c.2
  br i1 %and, label %bb1, label %exit

bb1:
  %f.1 = icmp ule i4 %x, %z
  ret i1 %f.1

exit:
  %c.3 = icmp ule i4 %x, %z
  ret i1 %c.3
}
