## Test that the contents of an XCOFF object file, which has an auxiliary
## header, is aligned in a big archive based on the MAX(maximum alignment
## of .text, maximum alignment of .data)

# RUN: rm -rf %t && mkdir %t
# RUN: cp %p/../llvm-readobj/XCOFF/Inputs/needed-libs*.o %t
# RUN: cd %t
# RUN: env OBJECT_MODE=32_64 llvm-ar -q t1.a needed-libs-64.o needed-libs-32.o
# RUN: env OBJECT_MODE=32_64 llvm-ar -q t2.a needed-libs-32.o needed-libs-64.o
# RUN: %python -c 'f=open("t1.a","rb");f.seek(384);print(f.read(2));f.close()' | FileCheck -check-prefix=MAGIC64 %s
# RUN: %python -c 'f=open("t1.a","rb");f.seek(7296);print(f.read(2));f.close()' | FileCheck -check-prefix=MAGIC32 %s
# RUN: %python -c 'f=open("t2.a","rb");f.seek(384);print(f.read(2));f.close()' | FileCheck -check-prefix=MAGIC32 %s
# RUN: %python -c 'f=open("t2.a","rb");f.seek(6144);print(f.read(2));f.close()' | FileCheck -check-prefix=MAGIC64 %s

# MAGIC64: b'\x01\xf7'
# MAGIC32: b'\x01\xdf'
