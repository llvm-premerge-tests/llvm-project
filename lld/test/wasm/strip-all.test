RUN: llvm-mc -filetype=obj -triple=wasm32-unknown-unknown %p/Inputs/start.s -o %t.start.o
RUN: wasm-ld --strip-all -o %t.wasm %t.start.o
RUN: obj2yaml %t.wasm | FileCheck %s

# Test alias -s
RUN: wasm-ld -s -o %t.wasm %t.start.o
RUN: obj2yaml %t.wasm | FileCheck %s

# Check that there is no name section
CHECK-NOT:   Name:    name

# Test --keep-section
RUN: wasm-ld --strip-all --keep-section=name -o %t.wasm %t.start.o
RUN: obj2yaml %t.wasm | FileCheck --check-prefix=CHECK-FOUND %s

# Check that name section was preserved
CHECK-FOUND:   Name:    name
